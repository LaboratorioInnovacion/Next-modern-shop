â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  âœ… RAMA FEATURE/SCRAPER LISTA                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š ESTADO ACTUAL:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… Rama:        feature/scraper
âœ… Commits:     3 commits listos
âœ… Workflow:    deploy-scraper.yml configurado
âœ… Docs:        Completas y actualizadas
â³ Pendiente:   Push a GitHub


ğŸ“¦ ARCHIVOS AGREGADOS (15 archivos):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ .github/
   â””â”€â”€ workflows/
       â””â”€â”€ deploy-scraper.yml         â† Workflow para esta rama
   â””â”€â”€ GITHUB_SECRETS.md              â† Doc de secrets

ğŸ“ modern-shopp/
   â”œâ”€â”€ Dockerfile                     â† Actualizado con Chromium
   â”œâ”€â”€ docker-compose.yml             â† Agregado env vars + volÃºmenes
   â”œâ”€â”€ package.json                   â† Agregado scripts npm
   â”œâ”€â”€ SCRAPER-DOCKER.md              â† GuÃ­a de uso Docker
   â”œâ”€â”€ .env.example                   â† Template variables
   â””â”€â”€ scripts/
       â”œâ”€â”€ README.md                  â† DocumentaciÃ³n scraper
       â”œâ”€â”€ scraper-main.js            â† Script principal
       â”œâ”€â”€ run-scraper.ps1            â† Helper Windows
       â”œâ”€â”€ run-scraper.sh             â† Helper Linux
       â”œâ”€â”€ config/
       â”‚   â””â”€â”€ scraper.config.js      â† ConfiguraciÃ³n central
       â”œâ”€â”€ scrapers/
       â”‚   â””â”€â”€ product-scraper.js     â† LÃ³gica scraping
       â”œâ”€â”€ sync/
       â”‚   â””â”€â”€ database-sync.js       â† Sync BD
       â””â”€â”€ utils/
           â””â”€â”€ helpers.js             â† Utilidades

ğŸ“ RaÃ­z/
   â””â”€â”€ PUSH-GUIDE.md                  â† Esta guÃ­a


ğŸ¯ CARACTERÃSTICAS IMPLEMENTADAS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… Scraping con Puppeteer + Chromium
âœ… Rate limiting (2s productos, 5s pÃ¡ginas)
âœ… ValidaciÃ³n imÃ¡genes (â‰¥400x400px)
âœ… Descarga automÃ¡tica de imÃ¡genes
âœ… SincronizaciÃ³n BD (crea/actualiza por SKU)
âœ… Sistema de logs completo
âœ… Reintentos automÃ¡ticos (3x con backoff)
âœ… Modo dry-run para pruebas
âœ… Compatible con Docker
âœ… GitHub Actions configurado
âœ… Scripts multiplataforma (PS1 + SH)


ğŸ” SECRETS NECESARIOS EN GITHUB:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  ANTES DE HACER PUSH, agrega estos 2 secrets:

1. DROPPERS_EMAIL        â†’ augustodelcampo97@gmail.com
2. DROPPERS_PASSWORD     â†’ Eldragon97

ğŸ”— Link directo:
https://github.com/LaboratorioInnovacion/Next-modern-shop/settings/secrets/actions


ğŸš€ COMANDOS PARA EJECUTAR:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# 1ï¸âƒ£  Configurar secrets en GitHub (link arriba)

# 2ï¸âƒ£  Push de la rama
git push -u origin feature/scraper

# 3ï¸âƒ£  Monitorear en GitHub Actions
# https://github.com/LaboratorioInnovacion/Next-modern-shop/actions

# 4ï¸âƒ£  Esperar ~15 minutos (construcciÃ³n + deploy)

# 5ï¸âƒ£  Ver resultado en tu servidor
ssh tu-servidor
docker ps
docker logs ecommerce_app --tail 50


ğŸ“‹ QUÃ‰ HARÃ EL WORKFLOW:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. âœ… Checkout del cÃ³digo
2. âœ… Verifica tÃºnel Cloudflare
3. âœ… Crea .env.production con todos los secrets
4. âœ… Para contenedores existentes
5. âœ… Crea directorios (public/products, scripts/logs, scripts/data)
6. âœ… Construye imagen Docker con Chromium incluido
7. âœ… Levanta servicios (postgres + nextjs)
8. âœ… Ejecuta migraciones Prisma
9. âœ… Verifica salud de la aplicaciÃ³n
10. ğŸ§ª Ejecuta test del scraper en modo dry-run (1 pÃ¡gina)


ğŸ›¡ï¸  SEGURIDAD:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… El test inicial es en modo dry-run (NO toca BD)
âœ… Rate limiting evita bloqueos
âœ… Credenciales en GitHub Secrets (no en cÃ³digo)
âœ… Logs detallados para auditorÃ­a
âœ… Reintentos automÃ¡ticos ante errores
âœ… No afecta Ã³rdenes, usuarios, ni sesiones existentes


ğŸ“Š DESPUÃ‰S DEL DEPLOY:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Ejecutar scraper completo (desde servidor)
docker exec ecommerce_app npm run scrape

# Ejecutar en modo prueba
docker exec ecommerce_app npm run scrape:dry

# Ver logs
docker exec ecommerce_app cat scripts/logs/scraper.log

# Ver productos scrapeados
docker exec ecommerce_db psql -U postgres -d ecommerce -c "SELECT COUNT(*) FROM \"Product\" WHERE sku IS NOT NULL;"


ğŸ”„ MERGE A MAIN (FUTURO):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Una vez probado y funcionando:

# OpciÃ³n A: Pull Request (recomendado)
1. Ve a GitHub
2. Create Pull Request: feature/scraper â†’ main
3. Review changes
4. Merge

# OpciÃ³n B: Merge directo
git checkout main
git merge feature/scraper
git push origin main


âš ï¸  IMPORTANTE:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. âš ï¸  AsegÃºrate de agregar los secrets ANTES del push
2. âš ï¸  El primer build tardarÃ¡ ~15 minutos (Chromium es pesado)
3. âš ï¸  Verifica que tu runner self-hosted estÃ© activo
4. âš ï¸  Revisa los logs en GitHub Actions si algo falla
5. âš ï¸  El scraper inicial es en dry-run (seguro, no toca BD)


ğŸ“š DOCUMENTACIÃ“N:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“– PUSH-GUIDE.md           â†’ Esta guÃ­a completa
ğŸ“– SCRAPER-DOCKER.md       â†’ Uso del scraper con Docker
ğŸ“– scripts/README.md       â†’ DocumentaciÃ³n tÃ©cnica del scraper
ğŸ“– .github/GITHUB_SECRETS.md â†’ ConfiguraciÃ³n de secrets


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     ğŸ‰ Â¡TODO LISTO PARA PUSH!                      â•‘
â•‘                                                                    â•‘
â•‘  Siguiente paso: Agregar secrets y ejecutar:                      â•‘
â•‘  git push -u origin feature/scraper                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
